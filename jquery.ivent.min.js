/*
 * jQuery Ivent Plugin 1.0
 */
(function(e){var t={default_method:"post"};var n={init:function(n){t=e.extend({},t,n);e(document).ready(function(){var t={};e("[data-event]").each(function(n,r){event_name=e(r).data("event");if(t[event_name]==undefined){e(document).on(event_name,"[data-event="+event_name+"]",function(t){t.stopPropagation();e(this).ivent("run",t.type);return false})}t[event_name]=true})})},run:function(t){object=e(this).ivent("objectify");object.selector.trigger("iv_"+t,object);if(object.stop!=undefined&&object.stop==true){return}object.selector.trigger("iv_action_"+object.action,object);if(object.stop!=undefined&&object.stop==true){return}object.selector.ivent("execute",object)},objectify:function(){object={};object.callbacks={};object.action=e(this).data("action");object.method=e(this).data("method");if(object.method==undefined){object.method=t.default_method}object.selector=e(this).data("selector");if(object.selector==undefined){object.selector=e(this)}else{object.selector=e(object.selector)}object.elements={};object.selector.find("[data-element]").each(function(t,n){wrap=e(n);if(wrap.data("selector")!=undefined){wrap=wrap.find(e(n).data("selector"))}if(wrap.data("value")!=undefined){object.elements[wrap.data("element")]=wrap.data("value")}else if(wrap.is("input, select")){object.elements[wrap.data("element")]=wrap.val()}else if(wrap.find("*").length==0){object.elements[wrap.data("element")]=wrap.html()}});return object},execute:function(t){t.selector.trigger("iv_execute_"+t.method,t);if(t.stop!=undefined&&t.stop==true){return}if(t.method=="post"||t.method=="get"){request_object={};request_object.action=t.action;request_object.elements=t.elements;e.ajax({url:t.action,type:t.method,data:request_object}).done(function(e){if(t.callbacks.done!=undefined){t.callbacks.done(e)}}).fail(function(e){if(t.callbacks.fail!=undefined){t.callbacks.fail(e)}}).always(function(e){if(t.callbacks.always!=undefined){t.callbacks.always(e)}})}}};e.fn.ivent=function(t){if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return n.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.ivent")}}})(jQuery)
